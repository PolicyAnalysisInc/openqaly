% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vbp.R
\name{run_vbp}
\alias{run_vbp}
\title{Run Value-Based Pricing Analysis}
\usage{
run_vbp(
  model,
  price_variable,
  intervention_strategy,
  outcome_summary = "total_qalys",
  cost_summary = "total_cost",
  ...
)
}
\arguments{
\item{model}{A heRomodel object or heRomodel_builder object}

\item{price_variable}{Name of the variable representing the intervention's price}

\item{intervention_strategy}{Name of the intervention strategy}

\item{outcome_summary}{Name of the outcome summary to use (default: "total_qalys")}

\item{cost_summary}{Name of the cost summary to use (default: "total_cost")}

\item{...}{Additional arguments passed to run_segment}
}
\value{
A list containing:
  \item{segments}{Raw segment results with price variations}
  \item{aggregated}{Aggregated results by strategy and price level}
  \item{vbp_equations}{Overall VBP equations (one per comparator)}
  \item{vbp_equations_by_group}{Group-specific VBP equations}
  \item{vbp_metadata}{Metadata about the analysis}
  \item{spec}{The VBP specification used}
}
\description{
Performs value-based pricing analysis by varying the price of an intervention
across three test values and calculating the linear relationship between WTP
and the price that maintains cost-effectiveness versus each comparator.
}
\details{
VBP analysis works by:
\enumerate{
  \item Running the model at three price points (0, 1, 2)
  \item Verifying that price affects only costs (not outcomes)
  \item Calculating the linear relationship between price and incremental costs
  \item Deriving the VBP equation: Price = (Î”Outcome/cost_slope) * WTP - (cost_intercept/cost_slope)
}

For models with groups, VBP equations are calculated for each group separately
and for the overall aggregated population. The overall equation should match
the weighted average of group equations.
}
\examples{
\dontrun{
model <- read_model(system.file("models/checkimab", package = "heRomod2"))

vbp_results <- run_vbp(
  model,
  price_variable = "c_check",
  intervention_strategy = "check",
  outcome_summary = "qalys",
  cost_summary = "costs"
)

# View overall equations
vbp_results$vbp_equations

# Calculate VBP at specific WTP
vbp_price <- calculate_vbp_price(vbp_results, "chemo", 50000)
}

}
