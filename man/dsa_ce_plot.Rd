% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dsa_plots.R
\name{dsa_ce_plot}
\alias{dsa_ce_plot}
\title{Plot DSA Cost-Effectiveness as Tornado Diagram}
\usage{
dsa_ce_plot(
  results,
  health_outcome,
  cost_outcome,
  groups = "overall",
  interventions = NULL,
  comparators = NULL,
  show_parameter_values = TRUE,
  drop_zero_impact = TRUE
)
}
\arguments{
\item{results}{A openqaly DSA results object (output from run_dsa)}

\item{health_outcome}{Name of the health outcome summary (e.g., "total_qalys")}

\item{cost_outcome}{Name of the cost summary (e.g., "total_cost")}

\item{groups}{Group selection: "overall" (default), specific group name, vector of groups,
or NULL (all groups plus aggregated)}

\item{interventions}{Character vector of intervention strategy name(s).
At least one of interventions or comparators must be specified.}

\item{comparators}{Character vector of comparator strategy name(s).
At least one of interventions or comparators must be specified.}

\item{show_parameter_values}{Logical. Include parameter values in Y-axis labels? (default: TRUE)}

\item{drop_zero_impact}{Logical. Remove parameters with zero impact on ICER? (default: TRUE)}
}
\value{
A ggplot2 object
}
\description{
Creates a tornado plot showing the impact of varying each DSA parameter on
the Incremental Cost-Effectiveness Ratio (ICER). Shows horizontal bars representing
the range of ICER variation with special handling for dominated, dominant, and
flipped scenarios.
}
\details{
The CE tornado plot displays each DSA parameter as a horizontal bar showing the range
of ICER values from low to high parameter value. Parameters are sorted by the magnitude
of their impact on ICER (largest range first).

**ICER Encoding:**
- Positive finite: Standard ICER (intervention more costly and more effective)
- Dominated (Inf): Intervention more costly with less/equal effect
- Dominant (0): Intervention less costly with more/equal effect
- Flipped (negative): Comparator more costly and more effective (displays with asterisk)
- Equivalent (NaN): Identical costs and outcomes

**Error Handling:**
- Direction changes (ICER sign flip): No bar, warning indicator
- Identical outcomes: No bar, warning indicator
- Identical base case: Full chart error message

**Comparison Modes:**
- Both as single values: shows one comparison
- One as vector, other NULL: shows each vs. all others
- Both as vectors (N×M mode): shows all pairwise comparisons

ICER calculations always use discounted values.
}
\examples{
\dontrun{
model <- define_model("markov") \%>\%
  add_variable("p_disease", 0.03) \%>\%
  add_dsa_variable("p_disease", low = 0.01, high = 0.05)
dsa_results <- run_dsa(model)

# CE tornado plot (comparator perspective)
dsa_ce_plot(dsa_results, "total_qalys", "total_cost", comparators = "control")

# CE tornado plot (intervention perspective)
dsa_ce_plot(dsa_results, "total_qalys", "total_cost", interventions = "new_treatment")

# N×M comparisons
dsa_ce_plot(dsa_results, "total_qalys", "total_cost",
            interventions = c("treatment_a", "treatment_b"),
            comparators = c("control", "standard_care"))
}

}
