% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/scenario.R
\name{run_scenario}
\alias{run_scenario}
\title{Run Scenario Analysis}
\usage{
run_scenario(
  model,
  vbp_price_variable = NULL,
  vbp_intervention = NULL,
  vbp_outcome_summary = NULL,
  vbp_cost_summary = NULL,
  ...
)
}
\arguments{
\item{model}{An openqaly model object with scenario specifications}

\item{vbp_price_variable}{Name of the price variable to vary for VBP analysis.
If NULL (default), standard scenario analysis without VBP is performed.}

\item{vbp_intervention}{Intervention strategy name for VBP analysis.
Required if vbp_price_variable is specified.}

\item{vbp_outcome_summary}{Outcome summary name for VBP analysis.
Defaults to "total_qalys" from model metadata if available.}

\item{vbp_cost_summary}{Cost summary name for VBP analysis.
Defaults to "total_cost" from model metadata if available.}

\item{...}{Additional arguments passed to run_segment}
}
\value{
Results list with segments and aggregated results (includes scenario_id dimension).
  When VBP is enabled, also includes scenario_vbp_equations tibble with VBP equations
  for each scenario.
}
\description{
Runs scenario analysis by executing the model for each defined scenario.
A "Base Case" scenario is automatically created with default parameters,
followed by each user-defined scenario with its specified overrides.
}
\details{
When VBP parameters are provided, Scenario+VBP mode is activated. In this mode,
each scenario includes 3 VBP price level sub-simulations to calculate the
VBP relationship for each scenario.
}
\examples{
\dontrun{
# Example 1: Basic scenario analysis
model <- define_model("markov") \%>\%
  add_variable("efficacy", 0.8) \%>\%
  add_variable("cost", 5000) \%>\%
  add_scenario("Optimistic", description = "Best case") \%>\%
  add_scenario_variable("Optimistic", "efficacy", 0.95) \%>\%
  add_scenario_variable("Optimistic", "cost", 4000) \%>\%
  add_scenario("Pessimistic", description = "Conservative") \%>\%
  add_scenario_variable("Pessimistic", "efficacy", 0.70) \%>\%
  add_scenario_variable("Pessimistic", "cost", 7000)

results <- run_scenario(model)

# Example 2: Scenario analysis with setting overrides
model <- define_model("markov") \%>\%
  set_settings(timeframe = 20, discount_cost = 3) \%>\%
  add_scenario("Extended Horizon") \%>\%
  add_scenario_setting("Extended Horizon", "timeframe", 30) \%>\%
  add_scenario("No Discounting") \%>\%
  add_scenario_setting("No Discounting", "discount_cost", 0) \%>\%
  add_scenario_setting("No Discounting", "discount_outcomes", 0)

results <- run_scenario(model)

# Example 3: Scenario analysis with VBP
model <- define_model("markov") \%>\%
  add_variable("cost_tx", 5000) \%>\%
  add_scenario("Optimistic") \%>\%
  add_scenario_variable("Optimistic", "efficacy", 0.95) \%>\%
  add_strategy("treatment") \%>\%
  add_strategy("comparator")

results <- run_scenario(
  model,
  vbp_price_variable = "cost_tx",
  vbp_intervention = "treatment"
)
}
}
