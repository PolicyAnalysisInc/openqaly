% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/psa_plots.R
\name{psa_parameter_scatter_matrix}
\alias{psa_parameter_scatter_matrix}
\title{Plot PSA Parameter Scatter Matrix}
\usage{
psa_parameter_scatter_matrix(
  results,
  variables,
  group = NULL,
  strategies = NULL,
  alpha = 0.3,
  title = NULL,
  label_wrap_width = 20,
  upper = list(continuous = "cor"),
  lower = list(continuous = "points"),
  diag = list(continuous = "densityDiag")
)
}
\arguments{
\item{results}{A heRomod2 PSA results object (from run_psa)}

\item{variables}{Character vector of variable names to visualize (required)}

\item{group}{Group selection with three modes:
\itemize{
  \item NULL or "all": include all groups
  \item Single value: filter to that group
  \item Vector same length as variables: specify group for each variable
}}

\item{strategies}{Strategy selection with three modes:
\itemize{
  \item NULL: include all strategies
  \item Single value: filter to that strategy
  \item Vector same length as variables: specify strategy for each variable
}}

\item{alpha}{Transparency level for scatter points (default: 0.3)}

\item{title}{Plot title (optional)}

\item{label_wrap_width}{Maximum width (in characters) before wrapping axis labels.
Set to NULL to disable wrapping. Default is 20 characters. This helps prevent
long variable names from overlapping in the plot.}

\item{upper}{List specifying upper triangle display. Default shows correlations.
See GGally::ggpairs documentation for options.}

\item{lower}{List specifying lower triangle display. Default shows scatter points.}

\item{diag}{List specifying diagonal display. Default shows density plots.}
}
\value{
A GGally ggpairs object
}
\description{
Creates a scatterplot matrix visualizing the sampled input parameter values
from probabilistic sensitivity analysis. Handles strategy/group-specific
variables with appropriate labeling.
}
\details{
This function creates a scatterplot matrix (pairs plot) showing relationships
between sampled input parameters from PSA. For strategy/group-specific variables,
labels use parenthetical notation:

- Generic variable: "Variable Name"
- Strategy-specific: "Variable Name (Strategy A)"
- Group-specific: "Variable Name (Group 1)"
- Both: "Variable Name (Strategy A, Group 1)"

Variable names are automatically wrapped to prevent overlapping. The
`label_wrap_width` parameter controls the maximum number of characters
before wrapping. Underscores, parentheses, and commas in variable names
are replaced with spaces to allow proper line breaking at word boundaries.

The matrix shows:
- Lower triangle: Scatter plots of parameter pairs
- Diagonal: Density plots of individual parameters
- Upper triangle: Correlation coefficients

This is useful for:
- Checking correlations between sampled parameters
- Verifying multivariate sampling behavior
- Understanding parameter distributions
- Quality checking PSA inputs
}
\examples{
\dontrun{
model <- read_model(system.file("models/example", package = "heRomod2"))
psa_results <- run_psa(model, n_sim = 1000)

# Visualize selected parameters (all strategies/groups)
psa_parameter_scatter_matrix(
  psa_results,
  variables = c("p_transition", "utility_well", "utility_sick", "cost_treatment")
)

# Focus on specific strategy
psa_parameter_scatter_matrix(
  psa_results,
  variables = c("p_transition", "utility_well"),
  strategies = "treatment_a"
)

# Visualize specific (variable, strategy, group) combinations
psa_parameter_scatter_matrix(
  psa_results,
  variables = c("p_well_to_sick", "p_well_to_dead", "p_well_to_well"),
  strategies = c("treatment_a", "treatment_a", "treatment_a"),
  group = c("group_1", "group_1", "group_1")
)

# Control label wrapping for long variable names
psa_parameter_scatter_matrix(
  psa_results,
  variables = c("very_long_parameter_name", "another_long_parameter"),
  label_wrap_width = 15  # Wrap at 15 characters
)

# Disable wrapping for short variable names
psa_parameter_scatter_matrix(
  psa_results,
  variables = c("param1", "param2", "param3"),
  label_wrap_width = NULL  # No wrapping
)
}

}
