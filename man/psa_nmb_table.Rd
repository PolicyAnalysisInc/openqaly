% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/psa_tables.R
\name{psa_nmb_table}
\alias{psa_nmb_table}
\title{PSA Incremental NMB Table}
\usage{
psa_nmb_table(
  results,
  outcome_summary,
  cost_summary,
  wtp,
  groups = "overall",
  interventions = NULL,
  comparators = NULL,
  decimals = 0,
  font_size = 11,
  table_format = c("flextable", "kable")
)
}
\arguments{
\item{results}{A openqaly PSA results object}

\item{outcome_summary}{Name of the outcome summary (e.g., "qalys")}

\item{cost_summary}{Name of the cost summary (e.g., "costs")}

\item{wtp}{Willingness-to-pay threshold for NMB calculation}

\item{groups}{Group selection:
\itemize{
  \item \code{"overall"} - Overall population (aggregated, default)
  \item \code{"group_name"} - Specific group by name
  \item \code{c("group1", "group2")} - Multiple specific groups (no overall)
  \item \code{c("overall", "group1")} - Specific groups + overall
  \item \code{"all"} or \code{NULL} - All groups + overall
  \item \code{"all_groups"} - All groups without overall
}}

\item{interventions}{Character vector of reference strategies for intervention
perspective. At least one of interventions or comparators required.}

\item{comparators}{Character vector of reference strategies for comparator
perspective. At least one of interventions or comparators required.}

\item{decimals}{Number of decimal places (default: 0, appropriate for monetary values)}

\item{font_size}{Font size for rendering (default: 11)}

\item{table_format}{Character. Backend to use: "flextable" (default) or "kable"}
}
\value{
A table object (flextable or kable depending on table_format)
}
\description{
Creates a table showing summary statistics for incremental net monetary
benefit (NMB) from PSA simulations. Displays mean, SD, median (IQR), range,
and probability of positive NMB for each comparison.
}
\details{
The table displays summary statistics for incremental NMB for each pairwise
comparison. Statistics include:
\itemize{
  \item Mean (95% CI): Mean incremental NMB with 2.5th and 97.5th percentiles
  \item SD: Standard deviation
  \item Median (IQR): Median with interquartile range
  \item Range: Minimum to maximum values
  \item P(NMB > 0): Probability that incremental NMB is positive (i.e., the
    intervention is cost-effective at the given WTP)
}

Incremental NMB is calculated as: (outcome_intervention - outcome_comparator) * WTP -
(cost_intervention - cost_comparator). A positive NMB indicates the intervention
is cost-effective at the given WTP threshold.

NMB calculations always use discounted values as this is a cost-effectiveness measure.
}
\examples{
\dontrun{
model <- read_model(system.file("models/example_markov", package = "openqaly"))
psa_results <- run_psa(model, n_sim = 1000)

# NMB relative to comparator
psa_nmb_table(psa_results, "qalys", "costs", wtp = 50000, comparators = "seritinib")

# NMB for specific intervention
psa_nmb_table(psa_results, "qalys", "costs", wtp = 100000, interventions = "volantor")

# NMB by group
psa_nmb_table(psa_results, "qalys", "costs", wtp = 50000,
              comparators = "seritinib", groups = "all_groups")
}

}
