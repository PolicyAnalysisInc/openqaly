% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dsa_plots.R
\name{dsa_outcomes_plot}
\alias{dsa_outcomes_plot}
\title{Plot DSA Outcomes as Tornado Diagram}
\usage{
dsa_outcomes_plot(
  results,
  summary_name,
  group = "aggregated",
  strategies = NULL,
  interventions = NULL,
  comparators = NULL,
  discounted = FALSE,
  show_parameter_values = TRUE,
  drop_zero_impact = TRUE
)
}
\arguments{
\item{results}{A openqaly DSA results object (output from run_dsa)}

\item{summary_name}{Name of the summary to plot (e.g., "total_qalys", "total_cost")}

\item{group}{Group selection: "aggregated" (default), specific group name, or NULL
(all groups plus aggregated)}

\item{strategies}{Character vector of strategy names to include (NULL for all).
Mutually exclusive with interventions/comparators.}

\item{interventions}{Character vector of intervention strategy name(s) (e.g., "new_treatment").
Can be a single value or vector. Can be combined with comparators for N×M comparisons.}

\item{comparators}{Character vector of comparator strategy name(s) (e.g., "control").
Can be a single value or vector. Can be combined with interventions for N×M comparisons.}

\item{discounted}{Logical. Use discounted values? (default: FALSE)}

\item{show_parameter_values}{Logical. Include parameter values in Y-axis labels? (default: TRUE)
When TRUE, labels show "Parameter Name (low - high)" format with evaluated parameter values.}

\item{drop_zero_impact}{Logical. Remove parameters with zero impact on results? (default: TRUE)
A parameter has zero impact when its range (abs(high - low)) is effectively zero.
If all parameters have zero impact, an error is thrown.}
}
\value{
A ggplot2 object
}
\description{
Creates a tornado plot showing the impact of varying each DSA parameter from
its low to high value on a specified summary (outcome or cost). Shows horizontal
bars representing the range of variation with a vertical line at the base case.
}
\details{
The tornado plot displays each DSA parameter as a horizontal bar showing the range
from low to high value. Parameters are sorted by the magnitude of their impact
(largest range first). A vertical line indicates the base case value.

**Comparison Modes:**

When neither interventions nor comparators is specified, shows absolute outcome values
for strategies specified in the `strategies` parameter.

When interventions and/or comparators are specified:
- Both as single values: shows one comparison (interventions - comparators)
- One as vector, other NULL: shows each vs. all others
  - interventions=c(A,B), comparators=NULL: A vs. all others, B vs. all others
  - comparators=c(C,D), interventions=NULL: all others vs. C, all others vs. D
- Both as vectors (N×M mode): shows all pairwise comparisons (excluding self-comparisons)
  - interventions=c(A,B), comparators=c(C,D): A vs. C, A vs. D, B vs. C, B vs. D

Faceting follows the standard pattern:
- Multiple strategies/comparisons only: facet_wrap(~ strategy)
- Multiple groups only: facet_wrap(~ group)
- Both: facet_grid(group ~ strategy)
- Single: no faceting
}
\examples{
\dontrun{
model <- define_model("markov") \%>\%
  add_variable("p_disease", 0.03) \%>\%
  add_dsa_variable("p_disease", low = 0.01, high = 0.05)
dsa_results <- run_dsa(model)

# Basic tornado plot
dsa_outcomes_plot(dsa_results, "total_qalys")

# Show differences vs control
dsa_outcomes_plot(dsa_results, "total_qalys", comparators = "control")

# Cost summary tornado plot
dsa_outcomes_plot(dsa_results, "total_cost", value_type = "cost")

# Tornado plot without parameter values in labels
dsa_outcomes_plot(dsa_results, "total_qalys", show_parameter_values = FALSE)
}

}
