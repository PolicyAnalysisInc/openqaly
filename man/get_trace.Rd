% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/trace_output.R
\name{get_trace}
\alias{get_trace}
\title{Extract Trace Data from Model Results}
\usage{
get_trace(
  results,
  format = c("long", "wide", "matrix"),
  collapsed = TRUE,
  strategies = NULL,
  groups = "overall",
  states = NULL,
  cycles = NULL,
  time_unit = c("cycle", "day", "week", "month", "year"),
  use_display_names = TRUE
)
}
\arguments{
\item{results}{A heRomod2 model results object (output from run_model)}

\item{format}{Output format: "long" (one row per cycle×state×strategy),
"wide" (one row per cycle, states as columns), or "matrix" (keep as matrix)}

\item{collapsed}{Logical. If TRUE (default), use aggregated traces from
results$aggregated. If FALSE, use segment-level traces from results$segments}

\item{strategies}{Character vector of strategy names to include (NULL for all)}

\item{groups}{Group selection:
\itemize{
  \item \code{"overall"} - Overall population (aggregated, default)
  \item \code{"group_name"} - Specific group by name
  \item \code{c("group1", "group2")} - Multiple specific groups (no overall)
  \item \code{c("overall", "group1")} - Specific groups + overall
  \item \code{"all"} or \code{NULL} - All groups + overall
  \item \code{"all_groups"} - All groups without overall
}}

\item{states}{Character vector of state names to include (NULL for all)}

\item{cycles}{Integer vector of cycles to include (NULL for all)}
}
\value{
A data frame (format = "long" or "wide") or list of matrices (format = "matrix")
}
\description{
Converts trace matrices from model results into various data frame formats
suitable for visualization and export.
}
\examples{
\dontrun{
model <- read_model(system.file("models/example_psm", package = "heRomod2"))
results <- run_model(model)

# Get long format (ggplot2-ready) for overall population
trace_long <- get_trace(results, format = "long")

# Get wide format (Excel-style)
trace_wide <- get_trace(results, format = "wide")

# Get specific strategies and groups
trace_subset <- get_trace(results, strategies = c("standard"),
                          groups = c("overall", "moderate"))
}

}
