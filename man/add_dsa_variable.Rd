% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/model_builder.R
\name{add_dsa_variable}
\alias{add_dsa_variable}
\title{Add Deterministic Sensitivity Analysis Variable to Model}
\usage{
add_dsa_variable(
  model,
  variable,
  low,
  high,
  strategy = "",
  group = "",
  display_name = NULL
)
}
\arguments{
\item{model}{A oq_model_builder object}

\item{variable}{Character string naming the variable to vary (must exist in model$variables)}

\item{low}{Expression or numeric value for the low bound of the sensitivity range.
Can use `bc` keyword to reference the base case value and other model variables.}

\item{high}{Expression or numeric value for the high bound of the sensitivity range.
Can use `bc` keyword to reference the base case value and other model variables.}

\item{strategy}{Optional strategy name to limit DSA to specific strategy}

\item{group}{Optional group name to limit DSA to specific group}

\item{display_name}{Optional display name for plots and tables. If not provided,
inherits from the variable definition. Required to be unique across all DSA parameters.}
}
\value{
The modified model object
}
\description{
Define a variable to include in deterministic sensitivity analysis (DSA).
DSA will run the model with this variable set to its low and high values
to assess parameter sensitivity.
}
\details{
The low and high bounds can be specified as:
- Literal numeric values (e.g., 0.01, 0.05)
- Expressions using the `bc` keyword to reference the base case value (e.g., bc * 0.5)
- Expressions referencing other model variables (e.g., bc - 2 * cost_se)

**Display Names**: DSA parameters automatically inherit display names from their variables.
Since variables auto-generate unique display names for strategy/group combinations
(e.g., "cost, treatment_a"), DSA parameters will also have unique names. You can optionally
override with custom `display_name` values in either `add_variable()` or `add_dsa_variable()`.
}
\examples{
\dontrun{
# Example 1: Literal values (backward compatible)
model <- define_model("markov") |>
  add_variable("p_disease", 0.03) |>
  add_dsa_variable("p_disease", low = 0.01, high = 0.05)

# Example 2: Relative to base case using bc keyword
model <- define_model("markov") |>
  add_variable("p_disease", 0.03) |>
  add_dsa_variable("p_disease",
                   low = bc * 0.5,    # 50\% of base case
                   high = bc * 1.5)   # 150\% of base case

# Example 3: Using other variables (standard error pattern)
model <- define_model("markov") |>
  add_variable("cost_tx", 1000) |>
  add_variable("cost_tx_se", 100) |>
  add_dsa_variable("cost_tx",
                   low = bc - 2 * cost_tx_se,  # Base - 2 SE
                   high = bc + 2 * cost_tx_se) # Base + 2 SE

# Example 4: Strategy-specific DSA with auto-generated display names
model <- define_model("markov") |>
  add_variable("p_prog", strategy = "treatment_a", formula = 0.3) |>
  add_variable("p_prog", strategy = "treatment_b", formula = 0.2) |>
  add_dsa_variable("p_prog", strategy = "treatment_a", low = 0.2, high = 0.4) |>
  add_dsa_variable("p_prog", strategy = "treatment_b", low = 0.1, high = 0.3)
# Auto-generates: "p_prog, treatment_a" and "p_prog, treatment_b"

# Example 5: Override auto-generated names with custom display names
model <- define_model("markov") |>
  add_variable("p_prog", display_name = "Treatment A Progression",
               strategy = "treatment_a", formula = 0.3) |>
  add_variable("p_prog", display_name = "Treatment B Progression",
               strategy = "treatment_b", formula = 0.2) |>
  add_dsa_variable("p_prog", strategy = "treatment_a", low = 0.2, high = 0.4) |>
  add_dsa_variable("p_prog", strategy = "treatment_b", low = 0.1, high = 0.3)
}
}
