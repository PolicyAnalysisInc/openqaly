% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/psa_plots.R
\name{pairwise_psa_scatter_plot}
\alias{pairwise_psa_scatter_plot}
\title{Plot Pairwise PSA Scatter Plot on Incremental Cost-Effectiveness Plane}
\usage{
pairwise_psa_scatter_plot(
  results,
  outcome_summary,
  cost_summary,
  interventions = NULL,
  comparators = NULL,
  wtp = NULL,
  groups = "overall",
  strategies = NULL,
  alpha = 0.3,
  title = NULL,
  xlab = NULL,
  ylab = NULL,
  legend_position = "right"
)
}
\arguments{
\item{results}{A openqaly PSA results object}

\item{outcome_summary}{Name of the outcome summary}

\item{cost_summary}{Name of the cost summary}

\item{interventions}{Reference strategies for comparison (intervention perspective: A vs. B, A vs. C).}

\item{comparators}{Reference strategies for comparison (comparator perspective: B vs. A, C vs. A).}

\item{wtp}{Numeric WTP threshold for cost-effectiveness evaluation. When provided,
points are colored by cost-effectiveness status and a WTP threshold line is drawn.
Default is NULL (no coloring or threshold line)}

\item{groups}{Group selection: "overall" (default) uses overall/aggregated results,
"all" includes overall + all groups, "all_groups" includes all groups without overall,
specific group name(s) filter to those groups (triggers faceting by group)}

\item{strategies}{Character vector of strategies to include (NULL for all).
Mutually exclusive with interventions/comparators.}

\item{alpha}{Transparency of scatter points (0-1). Default is 0.3}

\item{title}{Plot title. If NULL, auto-generated}

\item{xlab}{X-axis label. If NULL, auto-generated from outcome_summary}

\item{ylab}{Y-axis label. If NULL, auto-generated from cost_summary}

\item{legend_position}{Legend position: "bottom" (default), "right", "top",
"left", or "none"}
}
\value{
A ggplot2 object
}
\description{
Creates scatter plots showing the distribution of incremental costs and outcomes
from PSA simulations for pairwise comparisons. Each point represents one simulation's
incremental values relative to a comparator (at origin). Points can be colored by
cost-effectiveness status when a WTP threshold is provided.
}
\details{
This function creates incremental cost-effectiveness planes showing PSA simulation
results for pairwise comparisons. The comparator is always at the origin (0, 0),
and each point represents one simulation's incremental cost and outcome.

\strong{Comparison Modes:}

When interventions and/or comparators are specified:
\itemize{
  \item Both as single values: shows one comparison (intervention - comparator)
  \item One as vector, other NULL: shows each vs. all others
  \item Both as vectors (N x M mode): shows all pairwise comparisons (excluding self)
}

\strong{Interventions mode} (interventions = c('A', 'B')): Each panel shows an
intervention compared to other strategies
- X-axis: Incremental outcome (intervention - comparator)
- Y-axis: Incremental cost (intervention - comparator)
- Panel labels: "A vs. Strategy C", "B vs. Strategy C", etc.

\strong{Comparators mode} (comparators = c('C')): Each panel shows one strategy
compared to the comparator
- X-axis: Incremental outcome (strategy - comparator)
- Y-axis: Incremental cost (strategy - comparator)
- Panel labels: "Strategy A vs. C", "Strategy B vs. C", etc.

\strong{WTP Threshold}: When wtp is provided:
- Points are colored by cost-effectiveness: green if NMB > 0, red if NMB <= 0
- NMB (Net Monetary Benefit) = incremental_outcome * wtp - incremental_cost
- A dashed line with slope = wtp is drawn through the origin
- Legend shows cost-effectiveness status

\strong{Faceting}:
- Multiple groups: facet_grid with groups on rows, comparisons on columns
- Single group: facet_wrap by comparison

PSA scatter plots always use discounted values as this is a cost-effectiveness measure.
}
\examples{
\dontrun{
model <- read_model(system.file("models/example_psm", package = "openqaly"))
psa_results <- run_psa(model, n_sim = 1000)

# Comparator perspective: Each strategy vs control in separate panels
pairwise_psa_scatter_plot(psa_results, "total_qalys", "total_cost",
                          comparators = "control")

# With WTP threshold showing cost-effectiveness
pairwise_psa_scatter_plot(psa_results, "total_qalys", "total_cost",
                          comparators = "control",
                          wtp = 100000)

# Intervention perspective: New treatment vs others
pairwise_psa_scatter_plot(psa_results, "total_qalys", "total_cost",
                          interventions = "new_treatment",
                          wtp = 50000)

# N x M explicit comparisons
pairwise_psa_scatter_plot(psa_results, "total_qalys", "total_cost",
                          interventions = c("treatment_a", "treatment_b"),
                          comparators = "control",
                          wtp = 100000)

# All groups with multiple comparisons (facet_grid)
pairwise_psa_scatter_plot(psa_results, "total_qalys", "total_cost",
                          interventions = "new_treatment",
                          groups = "all",
                          wtp = 100000)
}

}
