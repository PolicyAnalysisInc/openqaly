% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/psa_plots.R
\name{pairwise_psa_scatter_plot}
\alias{pairwise_psa_scatter_plot}
\title{Plot Pairwise PSA Scatter Plot on Incremental Cost-Effectiveness Plane}
\usage{
pairwise_psa_scatter_plot(
  results,
  outcome_summary,
  cost_summary,
  intervention = NULL,
  comparator = NULL,
  wtp = NULL,
  groups = "overall",
  strategies = NULL,
  alpha = 0.3,
  title = NULL,
  xlab = NULL,
  ylab = NULL,
  legend_position = "right"
)
}
\arguments{
\item{results}{A openqaly PSA results object, or pre-calculated CEAC data
from calculate_incremental_ceac()}

\item{outcome_summary}{Name of the outcome summary (required if results is
a model object)}

\item{cost_summary}{Name of the cost summary (required if results is a
model object)}

\item{intervention}{Reference strategy for comparison (intervention perspective: A vs. B, A vs. C).
Mutually exclusive with comparator.}

\item{comparator}{Reference strategy for comparison (comparator perspective: B vs. A, C vs. A).
Mutually exclusive with intervention.}

\item{wtp}{Numeric WTP threshold for cost-effectiveness evaluation. When provided,
points are colored by cost-effectiveness status and a WTP threshold line is drawn.
Default is NULL (no coloring or threshold line)}

\item{groups}{Group selection: "overall" (default) uses overall/aggregated results,
"all" includes overall + all groups, "all_groups" includes all groups without overall,
specific group name(s) filter to those groups (triggers faceting by group)}

\item{strategies}{Character vector of strategy names to include (NULL for all)}

\item{alpha}{Transparency of scatter points (0-1). Default is 0.3}

\item{title}{Plot title. If NULL, auto-generated}

\item{xlab}{X-axis label. If NULL, auto-generated from outcome_summary}

\item{ylab}{Y-axis label. If NULL, auto-generated from cost_summary}

\item{legend_position}{Legend position: "bottom" (default), "right", "top",
"left", or "none"}
}
\value{
A ggplot2 object
}
\description{
Creates scatter plots showing the distribution of incremental costs and outcomes
from PSA simulations for pairwise comparisons. Each point represents one simulation's
incremental values relative to a comparator (at origin). Points can be colored by
cost-effectiveness status when a WTP threshold is provided.
}
\details{
This function creates incremental cost-effectiveness planes showing PSA simulation
results for pairwise comparisons. The comparator is always at the origin (0, 0),
and each point represents one simulation's incremental cost and outcome.

Both intervention and comparator modes display each comparison in a separate panel.

\strong{Intervention mode} (intervention = 'A'): Each panel shows intervention A
compared to one other strategy
- X-axis: Incremental outcome (A - comparator)
- Y-axis: Incremental cost (A - comparator)
- Panel labels: "A vs. Strategy B", "A vs. Strategy C", etc.

\strong{Comparator mode} (comparator = 'B'): Each panel shows one strategy compared to B
- X-axis: Incremental outcome (strategy - B)
- Y-axis: Incremental cost (strategy - B)
- Panel labels: "Strategy A vs. B", "Strategy C vs. B", etc.

\strong{WTP Threshold}: When wtp is provided:
- Points are colored by cost-effectiveness: green if NMB > 0, red if NMB <= 0
- NMB (Net Monetary Benefit) = incremental_outcome * wtp - incremental_cost
- A dashed line with slope = wtp is drawn through the origin
- Legend shows cost-effectiveness status

\strong{Faceting}:
- Multiple groups: facet_grid with groups on rows, comparisons on columns
- Single group: facet_wrap by comparison

PSA scatter plots always use discounted values as this is a cost-effectiveness measure.
}
\examples{
\dontrun{
model <- read_model(system.file("models/example_psm", package = "openqaly"))
psa_results <- run_psa(model, n_sim = 1000)

# Comparator perspective: Each strategy vs control in separate panels
pairwise_psa_scatter_plot(psa_results, "total_qalys", "total_cost",
                          comparator = "control")

# With WTP threshold showing cost-effectiveness
pairwise_psa_scatter_plot(psa_results, "total_qalys", "total_cost",
                          comparator = "control",
                          wtp = 100000)

# Intervention perspective: New treatment vs others
pairwise_psa_scatter_plot(psa_results, "total_qalys", "total_cost",
                          intervention = "new_treatment",
                          wtp = 50000)

# All groups with intervention mode (facet_grid)
pairwise_psa_scatter_plot(psa_results, "total_qalys", "total_cost",
                          intervention = "new_treatment",
                          group = NULL,
                          wtp = 100000)
}

}
