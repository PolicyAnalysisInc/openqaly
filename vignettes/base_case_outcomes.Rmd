---
title: "Base Case Outcomes"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Base Case Outcomes}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

This vignette demonstrates how to visualize and summarize base case model results using openqaly. The examples use a sample model included with the package.

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, include = FALSE}
library(openqaly)

model <- read_model(system.file("models", "checkimab", package = "openqaly"))

results <- run_model(model)
```

## Plots

### Bar

The `outcomes_plot_bar()` function creates bar charts showing outcome values broken down by component.

#### Overall population

```{r, fig.width=9, fig.height=6}
outcomes_plot_bar(
  results,
  outcome = "qalys"
)
```

#### By subgroup

Use `groups = 'all_groups'` to display results for each population subgroup separately.

```{r, fig.width=9, fig.height=6}
outcomes_plot_bar(
  results,
  outcome = "qalys",
  groups = 'all_groups'
)
```

#### Filtering to specific strategies

Use the `strategies` argument to include only selected strategies.

```{r, fig.width=9, fig.height=6}
outcomes_plot_bar(
  results,
  outcome = "qalys",
  strategies = c('chemo', 'check')
)
```

#### Differences with interventions

Use the `interventions` argument to show differences relative to other strategies.

```{r, fig.width=9, fig.height=6}
outcomes_plot_bar(
  results,
  outcome = "qalys",
  interventions = "check"
)
```

#### Differences with comparators

Use the `comparators` argument to show differences relative to a reference strategy.

```{r, fig.width=9, fig.height=6}
outcomes_plot_bar(
  results,
  outcome = "qalys",
  comparators = "chemo"
)
```

#### Differences with both interventions and comparators

Specify both to show a specific comparison.

```{r, fig.width=9, fig.height=6}
outcomes_plot_bar(
  results,
  outcome = "qalys",
  interventions = "check",
  comparators = "chemo"
)
```

### Line

The `outcomes_plot_line()` function displays outcomes as line charts over the model time horizon.

#### Cumulative outcomes

By default, cumulative values are shown.

```{r, fig.width=9, fig.height=6}
outcomes_plot_line(
  results,
  outcome = "qalys"
)
```

#### Per-cycle outcomes

Set `cumulative = FALSE` to show per-cycle values instead.

```{r, fig.width=9, fig.height=6}
outcomes_plot_line(
  results,
  outcome = "qalys",
  cumulative = FALSE
)
```

#### Differences with interventions

```{r, fig.width=9, fig.height=6}
outcomes_plot_line(
  results,
  outcome = "qalys",
  interventions = "check"
)
```

#### Differences with comparators

```{r, fig.width=9, fig.height=6}
outcomes_plot_line(
  results,
  outcome = "qalys",
  comparators = "chemo"
)
```

#### Differences with both interventions and comparators

```{r, fig.width=9, fig.height=6}
outcomes_plot_line(
  results,
  outcome = "qalys",
  interventions = "check",
  comparators = "chemo"
)
```

## Tables

The `outcomes_table()` function presents outcome values in tabular format.

### Overall population

```{r}
outcomes_table(
  results,
  outcome = "qalys"
)
```

### By subgroup

```{r}
outcomes_table(
  results,
  outcome = "qalys",
  groups = "all_groups"
)
```

### Differences with interventions

```{r}
outcomes_table(
  results,
  outcome = "qalys",
  interventions = "check"
)
```

### Differences with comparators

```{r}
outcomes_table(
  results,
  outcome = "qalys",
  comparators = "chemo"
)
```

### Differences with both interventions and comparators

```{r}
outcomes_table(
  results,
  outcome = "qalys",
  interventions = "check",
  comparators = "chemo"
)
```
